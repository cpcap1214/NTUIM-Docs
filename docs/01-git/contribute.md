# 多人協作

一個人的力量有限，如果想要單幹一個大型專案，勢必要花費很長的時間。

此外，如果專案要使用到兩種以上的程式語言，除非你本來就會，要不然你還要重頭開始學習，很花時間。

這時候，如果你夠聰明，就會找你朋友一起來開發，問題是，要怎麼一起編輯呢？

## 一起寫同一個檔案？

大家應該都用過 Google Docs 或是 Canva 吧，大家可以「即時」編輯一個頁面，並且其他人可以立刻看到結果。

但程式碼跟 Google Docs 的文章不一樣。

Google Docs 的模式適合處理文章，因為：

- 檔案只有一份，大家同時編輯同一段文字。
- 即時同步讓協作更直覺，因為文字變動對整體「可讀性」影響不大。

但程式碼開發是一個大型，情況完全不同：

### 1. 專案不是單一文件，而是龐大系統

一個專案往往包含數百甚至上千個檔案：前端、後端、資料庫、設定檔、測試檔…，每個檔案可能都有「相依性」。如果大家同時編輯，很容易就會導致「A 改了一個 B 正在使用的功能，但 B 不知道」的情況，整個專案很快會混亂。

### 2. 每個人負責不同職責

在專案裡，開發者會分工作自己擅長的事情，這也就代表每個人有自己的任務和責任範圍，不需要即時看到彼此的輸入過程，只要能在最後合併成果，並且讓你的隊友知道你做了什麼更改就好。

### 3. 即時同步太吃效能，沒有必要

如果所有人對所有檔案的改動都要即時同步，效能消耗會非常大。多數修改對其他人「當下」並不重要（例如 A 修正變數命名，B 不需要馬上知道）。

真正需要的是「在提交修改後，能被清楚追蹤與審查」，而不是即時顯示每一次鍵盤輸入。

### 4. 軟體專案需要「可回溯」的歷史

不像寫文章或是做投影片，只要保留最新版本，程式需要：

- 知道誰在什麼時間改了什麼功能。
- 如果新功能壞掉，可以隨時回到最新的穩定版本。
- 能分支開發不同功能，再合併回主版本，增加效率。

總結來說，與其說是「多人協作」，不如可以說是「多人各做各的，然後再合併起來」，協力的部分不是一份 code，是一整個專案。

## 怎麼多人協作？

### 前置動作：Fork & clone

如果要開始做專案，第一步是要把專案複製一份到自己的電腦上，要不然你本機上面沒有專案是要寫什麼東東。

首先，**fork** 專案到自己的 GitHub 帳號，剛剛有稍微提到 fork 了，fork 就是把別人的 GitHub 專案「複製」一份到你自己的 GitHub 帳號裡。

這份複製品和原始專案在一開始是一模一樣的，但是從那之後，你可以在自己的 fork 裡自由修改，不會影響到原作者的專案。

接著，**clone** 專案到自己的電腦上。

clone 就是把 GitHub 上的專案「複製」一份到你的電腦裡，因為你不能直接在網頁上修改 code（這樣蠻奇怪的）。

雖然這兩個動作都是複製，但是有很大的差別：

- fork 是把別人的專案「複製」到自己的 github 帳號。
- clone 是把剛剛 fork 過來的專案「複製」到電腦上，以便修改。

前置動作做完後，就可以開始協作了！

多人協作大致可以分成五個步驟：

### 1. 分支 (Branch)

- 每個人要開發新功能時，會從主版本（main branch）「切出一個 branch」，用來做自己的 feature（自己負責的部分）
- 這就像把主專案複製一份到自己的工作區，不會影響主版本。
- 例：
  - 如果這個團隊要做購物網頁，那麼：
  - A 建立 `login-feature` 分支負責登入功能
  - B 建立 `shopping-cart` 分支負責購物車
- Branch 不只是分工，也是確保 main branch 永遠保持穩定的保護機制。

------

### 2. 提交 (Commit)

- 在分支上做出修改後，用 commit 保存進度。
- 每個 commit 都會附上一個訊息 (commit message)，說明修改了什麼。
- 這樣整個團隊就可以追蹤「誰改了什麼」、「為什麼要改」。

------

### 3. 推送到遠端 (Push)

- 本地的修改完成後，會推送 (push) 到 GitHub 上的遠端分支。
- 這樣團隊成員就能看到彼此的最新進度，而不用即時同步每一個字。

------

### 4. 發 Pull Request (PR)

- 當分支的功能完成後，可以發出 **Pull Request (PR)**。
- PR 的意思是：「請把我這個分支的修改拉到 (pull) 主專案裡」。
- 在合併之前，其他人可以檢查程式碼 (code review)，確保品質與風格一致。

------

### 5. 合併 (Merge)

- 經過檢查後，專案負責人會把 PR 合併到主版本 (main branch)。
- 這樣功能就正式成為專案的一部分。
- 如果有衝突（兩個人改了同一段程式），git 會提醒你手動解決，避免彼此覆蓋。

太難懂嗎？我們來看一個簡單的例子。

今天，小明、小美、小華要幫台大資管架設一個網路論壇。

這個論壇主要有三個要開發的功能：登入、寫文章、看別人的文章。

小明作為專案管理的人，先建立了一個「NTU IM Forums」的專案，放到 GitHub 上面。

現在，小美和小華要開始開發了，但他們沒有直接修改小明專案的權限，因此他們先把這個專案 **fork** 到自己的 GitHub 帳號裡。

各自擁有一份一模一樣的副本後，他們再把 fork 出來的專案 **clone** 到自己的電腦裡，這樣就能在本機打開程式碼，真正開始開發。

小美決定負責登入功能，所以她在自己的電腦裡開了一個新的 **branch**，專心撰寫登入的程式。

她每完成一部分，就會 **commit** 保存下來，最後再把成果 **push** 回「自己」的 GitHub 帳號（注意，是自己的，因為修改過的程式碼還在小美自己的 branch，還沒有跟 main branch 合併）。

小華則負責寫文章的功能，他也用同樣的方式，在自己的 branch 上修改程式碼並記錄進度。

等到小美和小華完成各自的工作，他們就各自在 GitHub 發出 **Pull Request**，請小明把自己的修改合併回主專案。

小明會先檢查程式碼，確認沒有問題之後，才把登入和寫文章的功能整合進 NTU IM Forums 專案。

最後，這三個人的 code 就可以被安全地合併到 main branch（主分支）在一起，這時候論壇就同時具備了登入、寫文章和看文章的功能，可喜可賀。

## 特殊情況

如果這個專案沒有主要的開發者，大家都很重要，或是這個專案只是玩玩，那其實不用切 branch，直接在 main branch 上面開發就好。

當然，隨著專案擴大，或是你的 code 需要別人審視的話，切 branch 就是一個不錯的選擇。

## 練習

如果想要練習 contribute 的過程，可以去 [first-contributions](https://github.com/firstcontributions/first-contributions) 練習怎麼 fork, clone, push, 發 PR 等操作，在這個專案的 README 有更詳細的介紹。

如果還不習慣看英文的話，點一下台灣的國旗就有中文介紹了。

## 結語

git 跟 GitHub 的介紹就差不多到這邊，這邊講的大部分都是理論，實際在開發的時候會遇到很多不一樣的情況，就要隨時對應。

總之，多多練習就可以了，不用特地把每一個 git 的語法都背下來喔！
